{"version":3,"sources":["./src/app/Shared/custom-date.pipe.ts","./src/app/services/socket.service.ts","./src/app/home/home-routing.module.ts","./src/app/Shared/share.module.ts","./src/app/home/search/search.component.html","./src/app/home/search/search.component.ts","./src/app/home/message/message.component.html","./src/app/home/message/message.component.ts","./src/app/home/home/home.component.ts","./src/app/home/home/home.component.html","./src/app/home/home.module.ts","./src/app/home/conversation/conversation.component.ts","./src/app/home/conversation/conversation.component.html","./src/app/home/friend/friend.component.ts","./src/app/home/friend/friend.component.html","./src/app/modal/message.ts","./src/app/services/chat.service.ts"],"names":[],"mappings":"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","file":"home-home-module.js","sourcesContent":["import { DatePipe } from '@angular/common';\r\nimport { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'customDate'\r\n})\r\nexport class CustomDatePipe implements PipeTransform {\r\n\r\n  transform(inputDate: string): string {\r\n    const date  = new Date(inputDate);\r\n    console.log('landz', inputDate);\r\n    const datePipe = new DatePipe('en-US');\r\n    const today = new Date();\r\n    const diffTime: number = Math.abs(today.getTime() - date.getTime());\r\n    console.log('difftime', diffTime);\r\n    const MILISECONDS_OF_WEEK = 24 * 60 * 60 * 7 * 1000;\r\n    if (date.getDate() === today.getDate() &&\r\n    date.getMonth() === today.getMonth() &&\r\n    date.getFullYear() === today.getFullYear()){\r\n      return datePipe.transform(date, 'H:mm');\r\n    }\r\n\r\n\r\n    if (diffTime < MILISECONDS_OF_WEEK){\r\n      return datePipe.transform(date, 'EEE');\r\n    }\r\n    else{\r\n      return datePipe.transform(date, 'dd/MM/YYYY');\r\n    }\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, Subscriber } from 'rxjs';\r\nimport * as io from 'socket.io-client';\r\nimport { environment } from 'src/environments/environment';\r\nimport { AuthSevice } from './auth-sevice.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SocketService {\r\n  socketUrl = environment.apiUrl.socketUrl;\r\n  socket: any;\r\n  user: any;\r\n\r\n  constructor(public authen: AuthSevice) {\r\n   this.user = this.authen.getCurrentUser();\r\n   this.socket = io(`${this.socketUrl}?userId=${this.user.id}`);\r\n    // this.authen.getUserChange().subscribe((res: any) => {\r\n\r\n    //   console.log('getUserChange', this.socket);\r\n    //   if (res){\r\n    //     this.user = res;\r\n    //     console.log('userid', this.user.id);\r\n\r\n    //     this.socket = io(`${this.socketUrl}?userId=${this.user.id}`);\r\n    //   }\r\n    // });\r\n  }\r\n\r\n\r\n  /**\r\n   * @description listen data from event\r\n   * @param eventName name of event\r\n   * @returns Observable of data\r\n   */\r\n  listen(eventName: string): Observable<any>{\r\n    return new Observable((subscriber) => {\r\n      console.log(eventName);\r\n      this.socket.on(eventName, (data: any) => {\r\n        subscriber.next(data);\r\n      });\r\n    });\r\n  }\r\n  public videoCallRejected(toId): void {\r\n    this.socket.emit('video-call-reject', {\r\n       toId\r\n     });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { HomeComponent } from './home/home.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', pathMatch: 'full', component: HomeComponent},\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HomeRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CustomDatePipe } from './custom-date.pipe';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [CustomDatePipe],\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [CustomDatePipe]\r\n})\r\nexport class ShareModule { }\r\n","<div #search id=\"search\" class=\"search w-full h-full overflow-y-auto overflow-x-hidden pt-1 px-2 sm:px-3 pb-2\">\r\n    <h5 class=\"text-gray-400\">Danh sách tìm kiếm</h5>\r\n    <div class=\"group mb-1 flex items-center justify-between py-3 px-3  hover:bg-green-500 hover:text-white rounded \">\r\n        <div *ngIf=\"lstData\" class=\"flex items-center   \">\r\n            <div class=\"flex-shrink-0 h-10 w-10\">\r\n                <img class=\"h-10 w-10 rounded-full\"\r\n                    src=\"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=4&w=256&h=256&q=60\"\r\n                    alt=\"\">\r\n            </div>\r\n            <div>\r\n                <div class=\"group mb-1 flex items-center justify-between py-3 px-3 hover:text-white rounded\">\r\n                    {{lstData?.name}}\r\n                    <br>\r\n                    {{lstData?.phoneNumber}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n\r\n\r\n</div>","import { Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { ChatService } from 'src/app/services/chat.service';\r\n\r\n@Component({\r\n  selector: 'app-search',\r\n  templateUrl: './search.component.html',\r\n  styleUrls: ['./search.component.scss']\r\n})\r\nexport class SearchComponent implements OnInit {\r\n\r\n  lstData: any;\r\n  idserarc: any;\r\n  @Input() phonenumber: string;\r\n  @ViewChild('search') search: ElementRef;\r\n  constructor(public chatService: ChatService) {\r\n   }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngOnChanges() {\r\n    console.log('phone: ', this.phonenumber);\r\n    this.chatService.findUser(this.phonenumber).subscribe(res => {\r\n      this.lstData = res;\r\n      this.idserarc = res.name;\r\n      console.log('lstData', this.lstData);\r\n    });\r\n  }\r\n}\r\n","<div #message id=\"message\" class=\"w-full h-full overflow-y-auto overflow-x-hidden sm:px-6  px-3 pt-3 pb-3 \">\r\n    <ng-template ngFor let-item [ngForOf]=\"chatService.listMessage\">\r\n        <div class=\"w-full flex \" [ngClass]=\"{'justify-start':item.senderId !== id,'justify-end':item.senderId == id}\">\r\n            <div class=\" max-w-3/4 mx-4 my-2 p-2 rounded-lg break-all\" [ngClass]=\"{'bg-gray-300':item.senderId !== id,'bg-green-300':item.senderId == id}\">\r\n                {{item.content}} </div>\r\n        </div>\r\n    </ng-template> \r\n\r\n</div>","import { Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { AuthSevice } from 'src/app/services/auth-sevice.service';\r\nimport { ChatService } from 'src/app/services/chat.service';\r\n\r\n@Component({\r\n  selector: 'app-message',\r\n  templateUrl: './message.component.html',\r\n  styleUrls: ['./message.component.scss']\r\n})\r\nexport class MessageComponent implements OnInit {\r\n  @Input() id: any;\r\n  @ViewChild('message') message: ElementRef;\r\n  constructor(public chatService: ChatService, public authen: AuthSevice) {\r\n  }\r\n  ngOnInit(): void {\r\n    this.scrollToBottom();\r\n  }\r\n\r\n  // tslint:disable-next-line:use-lifecycle-interface\r\n  ngAfterViewChecked(): void {\r\n        this.scrollToBottom();\r\n        const show = true;\r\n    }\r\n  scrollToBottom(): void {\r\n        try {\r\n            this.message.nativeElement.scrollTop = this.message.nativeElement.scrollHeight;\r\n        } catch (err) { }\r\n    }\r\n}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Conversation } from 'src/app/modal/conversation';\r\nimport { Message } from 'src/app/modal/message';\r\nimport { UserProfile } from 'src/app/modal/user';\r\nimport { AuthSevice } from 'src/app/services/auth-sevice.service';\r\nimport { ChatService } from 'src/app/services/chat.service';\r\nimport { SocketService } from 'src/app/services/socket.service';\r\nimport { ConversationComponent } from '../conversation/conversation.component';\r\nimport { SearchComponent } from '../search/search.component';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.scss']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n    user: UserProfile = null;\r\n    isShowConversation = false;\r\n    Conversation: Conversation;\r\n    show = false;\r\n    Content: string;\r\n    callingInfo = { name: '', content: '', type: '' };\r\n    receiverId: string;\r\n    showModal = false;\r\n    phoneNumber: string;\r\n     isShowSearch = false;\r\n    @ViewChild(ConversationComponent) conversationComponent: ConversationComponent;\r\n    @ViewChild(SearchComponent) searchComponent: SearchComponent;\r\n\r\n  constructor(private auth: AuthSevice, public chatService: ChatService, private socketService: SocketService, private route: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    this.user = this.auth.getCurrentUser();\r\n    this.chatService.getConversation();\r\n    this.p_getChat();\r\n    // Listen event call\r\n    this.socketService.listen('video-call').subscribe(data => {\r\n      this.callingInfo.name = data.toName;\r\n      this.receiverId = data.fromId;\r\n      this.callingInfo.content = 'You have call ....';\r\n      this.callingInfo.type = data.type;\r\n      localStorage.setItem('callerSignal', JSON.stringify(data.signal));\r\n      this.showModal = true;\r\n    });\r\n    this.getPhone(this.phoneNumber);\r\n  }\r\n\r\n  public onToggle(): void {\r\n    this.isShowConversation = !this.isShowConversation;\r\n  }\r\n  public onGetMessage(item: any): void {\r\n    this.Content = '';\r\n    this.Conversation = item;\r\n    const newLocal = this;\r\n    newLocal.isShowConversation = true;\r\n    this.chatService.getMessage(item.conversationId).subscribe(res => {\r\n      this.chatService.listMessage = res;\r\n      console.log('list message', this.chatService.listMessage);\r\n    });\r\n  }\r\n\r\n  sendMessage(content: string): void {\r\n    if (!content) {\r\n      return;\r\n    }\r\n    if (this.Conversation.conversationId) {\r\n      const customObj = new Message();\r\n      customObj.content = content;\r\n      customObj.conversationId = this.Conversation.conversationId;\r\n      customObj.senderId = this.user.id;\r\n      this.chatService.sentMessage(customObj.content, customObj.conversationId, customObj.senderId).\r\n        subscribe(res => {\r\n          this.onGetMessage(this.Conversation);\r\n          this.Content = null;\r\n          this.chatService.getConversation();\r\n        });\r\n    }\r\n  }\r\n  audioCall(): void{\r\n    console.log('audio');\r\n    window.open(`/video?myUser=${this.user.id}&myName=${this.user.name}&conversationId=${this.Conversation.conversationId}&statusCall=audio-call`, '', 'width:70%,height:60%,align: center');\r\n  }\r\n\r\n  videoCall(): void{\r\n    window.open(`/video?myUser=${this.user.id}&myName=${this.user.name}&conversationId=${this.Conversation.conversationId}&statusCall=video-call`, '', 'width:70%,height:60%,align: center');\r\n  }\r\n\r\n  acceptCall(): void{\r\n    this.showModal = false;\r\n    window.open(`/video?myUser=${this.user.id}&receiverId=${this.receiverId}&statusCall=accept&type=${ this.callingInfo.type}`, '', 'width:70%,height:60%,align: center');\r\n  }\r\n\r\n  rejectCall(): void{\r\n    this.showModal = false;\r\n    console.log('receiveId', this.receiverId);\r\n    this.socketService.videoCallRejected(this.receiverId);\r\n  }\r\n  getPhone(phonenumber: string): void {\r\n      this.phoneNumber = phonenumber;\r\n  }\r\n\r\n  showConversation(): void{\r\n    // this.searchComponent.search.nativeElement.style.display = 'none';\r\n    // this.conversationComponent.conversation.nativeElement.style.display = 'block';\r\n    this.isShowSearch = false;\r\n  }\r\n  showSearch(): void{\r\n    // this.searchComponent.search.nativeElement.style.display = 'block';\r\n    // this.conversationComponent.conversation.nativeElement.style.display = 'none';\r\n    this.isShowSearch = true;\r\n  }\r\n  logOut(): void{\r\n    this.auth.logOut();\r\n    this.route.navigate(['login']);\r\n  }\r\n  private p_getChat(): void\r\n  {\r\n    this.socketService.listen('chat').subscribe(data => {\r\n      if (this.Conversation != null && data.conversationId === this.Conversation.conversationId) {\r\n        this.chatService.listMessage = [...this.chatService.listMessage, ...[data]];\r\n      }\r\n      this.chatService.getConversation();\r\n    });\r\n  }\r\n}\r\n","<div class=\" h-screen w-screen flex overflow-hidden\">\r\n  <!-- cột trái -->\r\n  <div class=\"h-screen w-screen sm:w-1/4  bg-green-50 shadow  overflow-hidden sm:flex flex flex-col \"\r\n    [ngClass]=\"{'hidden':isShowConversation}\">\r\n    <!-- thông tin người đáng đăng nhập -->\r\n    <div class=\"px-3 pt-3 pb-3 sm:px-6 w-full bg-green-600\">\r\n      <div class=\"flex justify-between\">\r\n        <div class=\"flex items-center\">\r\n          <div class=\"flex-shrink-0 h-10 w-10\">\r\n            <img class=\"h-10 w-10 rounded-full\"\r\n              src=\"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=4&w=256&h=256&q=60\"\r\n              alt=\"\">\r\n          </div>\r\n          <div class=\"ml-4\">\r\n            <div class=\"text-sm font-medium text-white\">\r\n              {{user.name}}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"flex items-center justify-end\">\r\n          <div class=\" flex items-center  justify-center h-10 w-10  text-white cursor-pointer\">\r\n            <button type=\"button\"\r\n              class=\"ml-2 inline-block rounded-lg font-medium leading-none py-2 px-3 focus:outline-none text-white hover:bg-green-500 focus:bg-green-500\"\r\n              (click)=\"showConversation()\">\r\n              <i class=\"fas fa-envelope\"></i>\r\n            </button>\r\n\r\n          </div>\r\n          <div class=\" flex items-center justify-center h-10 w-10  text-white cursor-pointer\">\r\n            <button type=\"button\"\r\n              class=\"ml-2 inline-block rounded-lg font-medium leading-none py-2 px-3 focus:outline-none text-white hover:bg-green-500 focus:bg-green-500\">\r\n              <i class=\"fas fa-user\"></i>\r\n            </button>\r\n\r\n          </div>\r\n\r\n          <div class=\"inline-flex items-center justify-center h-10 w-10 text-white cursor-pointer group relative\">\r\n            <button type=\"button\"\r\n              class=\"ml-2 inline-block rounded-lg font-medium leading-none py-2 px-3 focus:outline-none text-white hover:bg-green-500 focus:bg-green-500\">\r\n              <i class=\"fas fa-ellipsis-v\"></i>\r\n            </button>\r\n            <ul class=\"bg-white w-28 shadow rounded-md absolute hidden mt-28 mr-9 pt-1 text-gray-700 group-hover:block\">\r\n              <li class=\"rounded-sm px-3 py-1 hover:bg-gray-100\">Profile</li>\r\n              <li class=\"rounded-sm px-3 text-red-400 py-1 hover:bg-gray-100\" (click)=\"logOut()\">Đăng xuất</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"m-3.5 bg-white rounded shadow p-1 flex\" (click)=\"showSearch()\">\r\n      <span class=\"w-auto flex justify-end items-center text-gray-500 p-2\">\r\n        <i class=\"fas fa-search\"></i>\r\n      </span>\r\n      <form (submit)=\"getPhone(phoneNumber)\">\r\n        <input\r\n          class=\"w-full pr-16 border-none focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent\"\r\n          placeholder=\"Tìm kiếm người dùng\" name=\"phoneNumber\" type=\"text\" [(ngModel)]=\"phoneNumber\">\r\n      </form>\r\n    </div>\r\n    <app-search [phonenumber]=\"phoneNumber\" *ngIf=\"isShowSearch\"></app-search>\r\n    <!-- danh sách conversation-->\r\n    <div class=\"w-full flex-auto overflow-hidden \" *ngIf=\"!isShowSearch\">\r\n      <app-conversation (ConversationId)=\"onGetMessage($event)\"></app-conversation>\r\n    </div>\r\n  </div>\r\n  <!-- cột phải -->\r\n  <div [ngClass]=\"{'hidden':!isShowConversation}\" class=\"w-full h-screen sm:w-3/4  sm:block overflow-hidden\">\r\n    <div class=\"w-full h-full relative overflow-hidden\" *ngIf=\"Conversation\">\r\n      <div class=\"flex flex-col w-full h-full overflow-hidden\">\r\n        <!-- header -->\r\n        <div class=\"px-3 pt-3 pb-3 sm:px-6 w-full  bg-green-300\">\r\n          <div class=\"flex justify-between\">\r\n            <div class=\" flex items-center sm:hidden justify-center h-10 w-10  text-white cursor-pointer\">\r\n              <button type=\"button\"\r\n                class=\"ml-2 inline-block rounded-lg font-medium leading-none py-2 px-3 focus:outline-none text-white hover:bg-green-500 focus:bg-green-500\"\r\n                (click)=\"onToggle()\">\r\n                <i class=\"fas fa-arrow-left\"></i>\r\n              </button>\r\n\r\n            </div>\r\n            <div class=\"flex items-center\">\r\n              <div class=\"flex-shrink-0 h-10 w-10\">\r\n                <img class=\"h-10 w-10 rounded-full\"\r\n                  src=\"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=4&w=256&h=256&q=60\"\r\n                  alt=\"\">\r\n              </div>\r\n              <div class=\"ml-4\">\r\n                <div class=\"text-sm font-medium text-gray-900\">\r\n                  {{Conversation.nameConversation}}\r\n                </div>\r\n                <div class=\"text-sm text-gray-500\">\r\n                  <!-- {{user.email}} -->\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"flex justify-end\">\r\n              <!-- icon -->\r\n\r\n              <div class=\"flex items-center justify-center h-10 w-10  text-white cursor-pointer\" (click)=\"audioCall()\">\r\n                <button type=\"button\"\r\n                  class=\"ml-2 inline-block rounded-lg font-medium leading-none py-2 px-3 focus:outline-none text-white hover:bg-green-500 focus:bg-green-500\">\r\n                  <i class=\"fas fa-phone-alt\"></i>\r\n                </button>\r\n\r\n              </div>\r\n              <div class=\"flex items-center justify-center h-10 w-10  text-white cursor-pointer\" (click)=\"videoCall()\">\r\n                <button type=\"button\"\r\n                  class=\"ml-2 inline-block rounded-lg font-medium leading-none py-2 px-3 focus:outline-none text-white hover:bg-green-500 focus:bg-green-500\">\r\n                  <i class=\"fas fa-video\"></i>\r\n                </button>\r\n\r\n              </div>\r\n              <div class=\"flex items-center justify-center h-10 w-10  text-white cursor-pointer\">\r\n\r\n                <button type=\"button\"\r\n                  class=\"ml-2 inline-block rounded-lg font-medium leading-none py-2 px-3 focus:outline-none text-white hover:bg-green-500 focus:bg-green-500\">\r\n                  <i class=\"fas fa-info\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        <!-- body-->\r\n        <div class=\" w-full  flex-auto overflow-hidden pt-2\">\r\n          <app-message [id]=\"user.id\"></app-message>\r\n\r\n\r\n        </div>\r\n        <!--footer-->\r\n        <div class=\"w-full  bg-green-300 mt-1\">\r\n          <form (ngSubmit)=\"sendMessage(Content)\">\r\n            <div class=\"flex justify-between\">\r\n              <div class=\"flex items-center justify-center h-50 w-50  text-white cursor-pointer\">\r\n                <button type=\"button\"\r\n                  class=\"ml-2 inline-block rounded-lg text-4xl leading-none py-2 px-3 focus:outline-none text-white hover:bg-green-500 focus:bg-green-500\">\r\n                  <i class=\"fas fa-smile-wink\"></i>\r\n                </button>\r\n\r\n              </div>\r\n              <input type=\"text\"\r\n                class=\"flex-grow m-2 py-3  mr-1 rounded-full border border-gray-300 bg-gray-200 resize-none focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                rows=\"1\" placeholder=\"Type a message\" name=\"Content\" [(ngModel)]=\"Content\" autocomplete=\"off\" />\r\n              <!-- <input class=\"focus:ring-2 focus:ring-green-600 focus:outline-none \"> -->\r\n              <div class=\"flex items-center justify-center h-50 w-50  text-white cursor-pointer mr-3\">\r\n                <button type=\"button\"\r\n                  class=\"ml-2 inline-block rounded-lg text-4xl leading-none py-2 px-3 focus:outline-none text-white hover:bg-green-500 focus:bg-green-500\"\r\n                  (click)=\"sendMessage(Content)\">\r\n                  <i class=\"fab fa-telegram-plane\"></i>\r\n                </button>\r\n\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"showModal\"\r\n  class=\"overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex\">\r\n  <div class=\"relative sm:w-1/5 my-6 mx-auto max-w-sm\">\r\n    <!--content-->\r\n    <div class=\"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none\">\r\n      <!--header-->\r\n      <div class=\"flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t\">\r\n        <h3 class=\"text-3xl font-semibold\">\r\n          Call video\r\n        </h3>\r\n        <button\r\n          class=\"p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none\"\r\n          (click)=\"rejectCall()\">\r\n          <span class=\"bg-transparent text-black opacity-5 h-6 w-6 text-2xl block outline-none focus:outline-none\">\r\n            ×\r\n          </span>\r\n        </button>\r\n      </div>\r\n      <!--body-->\r\n      <div class=\"relative p-6 flex-auto\">\r\n       <h4 class=\"w-full\">\r\n        Caller: {{callingInfo.name}}\r\n       </h4>\r\n       <h5 class=\"flex items-center justify-center w-full\">\r\n        {{callingInfo.content}} \r\n       </h5>\r\n      </div>\r\n      <!--footer-->\r\n      <div class=\"flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b\">\r\n        <button\r\n          class=\"text-green-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150\"\r\n          type=\"button\" (click)=\"acceptCall()\">\r\n          Accept\r\n        </button>\r\n        <button\r\n          class=\"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150\"\r\n          type=\"button\" (click)=\"rejectCall()\">\r\n          Reject\r\n        </button>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf=\"showModal\" class=\"opacity-25 fixed inset-0 z-40 bg-black\"></div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { ConversationComponent } from './conversation/conversation.component';\r\nimport { FriendComponent } from './friend/friend.component';\r\nimport { MessageComponent } from './message/message.component';\r\nimport { HomeComponent } from './home/home.component';\r\nimport { ShareModule } from '../Shared/share.module';\r\nimport { HomeRoutingModule } from './home-routing.module';\r\nimport { SearchComponent } from './search/search.component';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [ HomeComponent, ConversationComponent, FriendComponent, MessageComponent, SearchComponent ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ShareModule,\r\n    ReactiveFormsModule,\r\n    HomeRoutingModule\r\n  ]\r\n})\r\nexport class HomeModule { }\r\n","import { Component, ElementRef, EventEmitter, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { UserProfile } from 'src/app/modal/user';\r\nimport { AuthSevice } from 'src/app/services/auth-sevice.service';\r\nimport { ChatService } from 'src/app/services/chat.service';\r\n\r\n@Component({\r\n  selector: 'app-conversation',\r\n  templateUrl: './conversation.component.html',\r\n  styleUrls: ['./conversation.component.scss']\r\n})\r\nexport class ConversationComponent implements OnInit {\r\n  isActive = true;\r\n  @Output() ConversationId = new EventEmitter<string>();\r\n  lstData: Array<any> = [];\r\n  activeElement: any;\r\n  @ViewChild('conversation', {read: ElementRef}) conversation: ElementRef;\r\n  constructor(public chatService: ChatService) {\r\n    this.chatService.changeData().subscribe( res => {\r\n      this.lstData = res;\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n  // tslint:disable-next-line:typedef\r\n  getIdConversation(item) {\r\n    this.activeElement  = item.conversationId;\r\n    this.ConversationId.emit(item);\r\n  }\r\n}\r\n","<div #conversation id=\"conversation\"\r\n  class=\"conversation w-full h-full overflow-y-auto overflow-x-hidden pt-1 px-2 sm:px-3 pb-2\">\r\n  <h5 class=\"text-gray-400\">Cuộc hội thoại</h5>\r\n  <ng-template ngFor let-item [ngForOf]=\"lstData\">\r\n    <div [ngClass]=\"{'bg-green-400 text-white shadow':item.conversationId === activeElement}\"\r\n      class=\"group mb-1 flex items-center justify-between py-3 px-3  hover:bg-green-500 hover:text-white rounded \"\r\n      (click)=\"getIdConversation(item)\">\r\n      <div class=\"flex items-center\">\r\n        <div class=\"flex-shrink-0 h-10 w-10\">\r\n          <img class=\"h-10 w-10 rounded-full\"\r\n            src=\"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=4&w=256&h=256&q=60\"\r\n            alt=\"\">\r\n        </div>\r\n        <div class=\"ml-4\">\r\n          <div\r\n            [ngClass]=\"{'text-white':item.conversationId === activeElement,'text-gray-900':!item.conversationId === activeElement}\"\r\n            class=\"text-sm font-medium text-white  group-hover:text-white\">\r\n            {{item.nameConversation}}\r\n          </div>\r\n          <div class=\"text-sm group-hover:text-white\"\r\n            [ngClass]=\"{'text-gray-50':item.conversationId === activeElement == true,'text-gray-500':!item.conversationId === activeElement}\">\r\n            {{item.lastMessage}}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"flex items-center flex-col\">\r\n        <div>\r\n          {{item.createTimeLastMessage | customDate}}\r\n        </div>\r\n        <div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </ng-template>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-friend',\r\n  templateUrl: './friend.component.html',\r\n  styleUrls: ['./friend.component.scss']\r\n})\r\nexport class FriendComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>friend works!</p>\r\n","export class Message {\r\n    content: string;\r\n    conversationId: string;\r\n    receiverName: string;\r\n    senderId: string;\r\n    ConversationId: string;\r\n    senderName: string;\r\n    status: string;\r\n    type: string;\r\n}\r\n","import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Conversation } from '../modal/conversation';\r\nimport { Friend } from '../modal/friend';\r\nimport { Message } from '../modal/message';\r\nimport { UserProfile } from '../modal/user';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ChatService {\r\n  token = localStorage.getItem('accessToken');\r\n  listMessage: Message[] = [];\r\n  listFriend: Friend[] = [];\r\n  listConversation: BehaviorSubject<Conversation[]>;\r\n  listUser: UserProfile [] = [];\r\n  userSearchResult: BehaviorSubject<UserProfile>;\r\n  changeData(): Observable<any>{\r\n    return this.listConversation.asObservable();\r\n  }\r\n\r\n  changeUserResult(): Observable<any>{\r\n    return this.userSearchResult.asObservable();\r\n  }\r\n  constructor(private route: Router, private http: HttpClient) {\r\n    this.listConversation = new BehaviorSubject<Conversation[]>(null);\r\n    this.userSearchResult = new BehaviorSubject<UserProfile>(null);\r\n   }\r\n   getToken(): string\r\n   {\r\n     return localStorage.getItem('accessToken');\r\n   }\r\n  getMessage(id: string): Observable<any> {\r\n    return this.http.get(`${environment.apiUrl.chatUrl}api/v1/messages/${id}`);\r\n  }\r\n  getApiFriend(): Observable<any>{\r\n    const reqHeader = new HttpHeaders({\r\n      // tslint:disable-next-line:object-literal-key-quotes\r\n      'Authorization': `Bearer ${this.getToken()}`\r\n    });\r\n    return this.http.get(`${environment.apiUrl.chatUrl}api/v1/friend`, {headers: reqHeader});\r\n  }\r\n\r\n  getConversation(): void{\r\n    const reqHeader = new HttpHeaders({\r\n      // tslint:disable-next-line:object-literal-key-quotes\r\n      'Authorization': `Bearer ${this.getToken()}`\r\n    });\r\n    this.http.get(`${environment.apiUrl.chatUrl}api/v1/conversation`, { headers: reqHeader }).subscribe(\r\n    (res: Conversation[]) => {\r\n        this.listConversation.next(res);\r\n    }\r\n  );\r\n  }\r\n  sentMessage(content: string, conversationId: string, senderId: string): Observable<any>{\r\n    return new Observable(obs => {\r\n    this.http.post(`${environment.apiUrl.chatUrl}api/v1/messages`, {\r\n      content,\r\n      conversationId,\r\n      senderId\r\n    }, {responseType: 'text'}).subscribe(res => {\r\n      obs.next(res);\r\n      obs.complete();\r\n    }, er => {\r\n       obs.error('Loi');\r\n       obs.complete();\r\n    });\r\n    }) ;\r\n  }\r\n\r\n  findUser(phoneNumber: string): Observable<any>{\r\n    return this.http.post(`${environment.apiUrl.chatUrl}api/v1/users/find-user`, {\r\n      phoneNumber\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}